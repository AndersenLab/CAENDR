
<input id="filter" type="text" class="form-control pull-right" style="width:200px;" placeholder="Filter Strain Name" action="#">
<table class="table table-hover table-condensed strain-table">
    <thead>
        <tr>
            <th style="width: 200px;">
                <span class="tooltip-item" data-toggle="tooltip" data-placement="bottom" title="Name of strain we distribute as a representative of an isotype.">
                            Strain
                            </span>
            </th>
            <th style="width: 200px;">
                <span class="tooltip-item" data-toggle="tooltip" data-placement="bottom" title="Name assigned to a group of strains that share the same genome-wide haplotype.">
                            Isotype
                            </span>
            </th>
            <th style="width: 200px;">Strain BAM</th>
        </tr>
    </thead>
    <div style="height: 30px;"></div>
    <tbody class="searchable">
        {% set count = namespace(value=0) %}
        {% for isotype, strains in strain_listing|groupby('isotype') %}
        {% for strain in strains|sort(attribute='isotype_ref_strain', reverse=True) %}
            {% if strain.issues == False %}
            {% set count.value = count.value + 1 %}
            <tr {% if strain.isotype_ref_strain %}class="success ref_strain"{% else %}class="strain"{% endif %}>
                <td>
                    {% if strain.isotype_ref_strain %}
                        <strong>{{ strain }}</strong>
                    {% else %}
                        &nbsp;&nbsp;&nbsp;&nbsp;{{ strain }}
                    {% endif %}
                </td>
                <td>
                    {% if strain.isotype_ref_strain %}
                        <strong>
                            <a href="{{ url_for('isotype.isotype_page', isotype_name=isotype, release = selected_release) }}">{{ isotype }}</a>
                        </strong>
                    {% else %}
                        <a href="{{ url_for('isotype.isotype_page', isotype_name=isotype, release = selected_release) }}">{{ isotype }}</a>
                    {% endif %}
                </td>
                <td>
                    {% if strain.sequenced %}
                      <a href="{{ url_for('data_downloads.download_bam_bai_file', species_name=species.get_slug(), strain_name=strain, ext='bam') }}" target="_blank">BAM</a>
                      <a href="{{ url_for('data_downloads.download_bam_bai_file', species_name=species.get_slug(), strain_name=strain, ext='bam.bai') }}" target="_blank">BAI</a>
                    {% endif %}
                </td>
            </tr>
            {% endif %}
        {% endfor %}
        {% endfor %}
    </tbody>
</table>


<script>

$(document).ready(function() {

    (function($) {

        var patterns = [];
        $('#filter').keyup(function() {
            $('.searchable tr').hide();
            console.log($(this).val());
            $(this).val().split(',').forEach(function(r) {
                var rex = new RegExp(r, "i");
                $('.searchable tr').filter(function() {
                    return rex.test($(this).text());
                }).show();
            })  
        })

    }(jQuery));
});

</script>
